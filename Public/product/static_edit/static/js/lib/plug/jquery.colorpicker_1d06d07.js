!function(e){{var r=new Array("00","33","66","99","CC","FF");new Array("FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF")}e.fn.colorpicker=function(t){function o(){e("body").append('<div id="colorpanel" style="position:absolute;display:none;border:1px solid rgb(204,204,204);padding:5px;background:rgb(51,51,51);z-index:1001;"></div>');var t="",o="";for(i=0;2>i;i++)for(j=0;6>j;j++)for(t+="<tr height=14>",k=0;3>k;k++)for(l=0;6>l;l++)o=r[k+3*i]+r[l]+r[j],t=t+'<td width=12 rel="#'+o+'" style="background-color:#'+o+';cursor: pointer;">';t='<table id="CT" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="000000"  style="cursor:pointer;">'+t+'</table><table width=235 border="0" cellspacing="0" cellpadding="0" style="border:1px solid #000;"><tr height=50><td colspan=21 id="DisColor"><table cellpadding="0" cellspacing="1" border="0" style="border-collapse:collapse;margin:0 auto;text-align:center;"><tr><td><input type="text" id="HexColor" size="6" style="border:inset 1px;font-family:Arial;height:22px;line-height:22px;padding-left:10px;" value="#000000"><a href="javascript:void(0);" id="_cclose">关闭</a></td></tr></table></td></tr></table>',e("#colorpanel").html(t),e("#_cclose").live("click",function(){return e("#colorpanel").hide(),!1}).css({"font-size":"12px","margin-left":"10px",background:"#fff",padding:"4px 4px",position:"relative"})}function a(e){var r;return e&&e.constructor==Array&&3==e.length&&(e=e),(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))&&(e=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]),(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))&&(e=[2.55*parseFloat(r[1]),2.55*parseFloat(r[2]),2.55*parseFloat(r[3])]),(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))&&(e=[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]),(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))&&(e=[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]),"rgb("+e[0]+","+e[1]+","+e[2]+")"}var n=jQuery.extend({},jQuery.fn.colorpicker.defaults,t);return o(),this.each(function(){var r=e(this);r.bind(n.event,function(t){var o=e(this).offset().top,l=e(this).height(),s=e(this).offset().left;e("#colorpanel").css({top:o+l+5,left:s-108}).show();var i=n.target?e(n.target):r;null==i.data("color")&&i.data("color",i.css("color")),null==i.data("value")&&i.data("value",i.val()),e("#CT tr td").unbind("click").mouseover(function(){var r=e(this).css("background-color");e("#DisColor").css("background",r),e("#HexColor").val(e(this).attr("rel"))}).click(function(){var t=e(this).attr("rel");t=n.ishex?t:a(t),n.fillcolor&&i.val(t),i.css("color",t),e("#colorpanel").hide(),n.success(r,t)}),t.stopPropagation()}),e(document).click(function(){e("#colorpanel").hide()})})},jQuery.fn.colorpicker.defaults={ishex:!0,fillcolor:!1,target:null,event:"click",success:function(){},reset:function(){}}}(jQuery);